{"ast":null,"code":"// frontend/src/utils/history.js\nimport axios from 'axios';\nconst API_BASE_URL = 'http://localhost:5000/api';\nexport const addVideoToUserHistory = async video => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    console.warn('No hay token de autenticación. No se puede añadir video al historial.');\n    return;\n  }\n  try {\n    await axios.post(`${API_BASE_URL}/users/history`, {\n      videoId: video.id,\n      title: video.title,\n      thumbnail: video.thumbnail,\n      channelTitle: video.channelTitle\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n  } catch (error) {\n    console.error('Error al añadir video al historial:', error.response ? error.response.data : error.message);\n  }\n};\nexport const getUserHistory = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) return [];\n  try {\n    const res = await axios.get(`${API_BASE_URL}/users/history`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return res.data || [];\n  } catch (err) {\n    console.warn('No se pudo obtener historial:', err);\n    return [];\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","addVideoToUserHistory","video","token","localStorage","getItem","console","warn","post","videoId","id","title","thumbnail","channelTitle","headers","Authorization","error","response","data","message","getUserHistory","res","get","err"],"sources":["C:/Users/luisa/Downloads/Proyecto-geolocalizacion-main/Proyecto-geolocalizacion-main/frontend/src/utils/history.js"],"sourcesContent":["// frontend/src/utils/history.js\nimport axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:5000/api';\n\nexport const addVideoToUserHistory = async (video) => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    console.warn('No hay token de autenticación. No se puede añadir video al historial.');\n    return;\n  }\n\n  try {\n    await axios.post(\n      `${API_BASE_URL}/users/history`,\n      {\n        videoId: video.id,\n        title: video.title,\n        thumbnail: video.thumbnail,\n        channelTitle: video.channelTitle\n      },\n      {\n        headers: { Authorization: `Bearer ${token}` }\n      }\n    );\n  } catch (error) {\n    console.error('Error al añadir video al historial:', error.response ? error.response.data : error.message);\n  }\n};\n\nexport const getUserHistory = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) return [];\n  try {\n    const res = await axios.get(`${API_BASE_URL}/users/history`, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    return res.data || [];\n  } catch (err) {\n    console.warn('No se pudo obtener historial:', err);\n    return [];\n  }\n};"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG,2BAA2B;AAEhD,OAAO,MAAMC,qBAAqB,GAAG,MAAOC,KAAK,IAAK;EACpD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACF,KAAK,EAAE;IACVG,OAAO,CAACC,IAAI,CAAC,uEAAuE,CAAC;IACrF;EACF;EAEA,IAAI;IACF,MAAMR,KAAK,CAACS,IAAI,CACd,GAAGR,YAAY,gBAAgB,EAC/B;MACES,OAAO,EAAEP,KAAK,CAACQ,EAAE;MACjBC,KAAK,EAAET,KAAK,CAACS,KAAK;MAClBC,SAAS,EAAEV,KAAK,CAACU,SAAS;MAC1BC,YAAY,EAAEX,KAAK,CAACW;IACtB,CAAC,EACD;MACEC,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUZ,KAAK;MAAG;IAC9C,CACF,CAAC;EACH,CAAC,CAAC,OAAOa,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAACC,QAAQ,CAACC,IAAI,GAAGF,KAAK,CAACG,OAAO,CAAC;EAC5G;AACF,CAAC;AAED,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;EACxC,MAAMjB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACF,KAAK,EAAE,OAAO,EAAE;EACrB,IAAI;IACF,MAAMkB,GAAG,GAAG,MAAMtB,KAAK,CAACuB,GAAG,CAAC,GAAGtB,YAAY,gBAAgB,EAAE;MAC3Dc,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUZ,KAAK;MAAG;IAC9C,CAAC,CAAC;IACF,OAAOkB,GAAG,CAACH,IAAI,IAAI,EAAE;EACvB,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZjB,OAAO,CAACC,IAAI,CAAC,+BAA+B,EAAEgB,GAAG,CAAC;IAClD,OAAO,EAAE;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}